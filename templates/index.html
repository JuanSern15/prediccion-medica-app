<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Predicci贸n de Diagn贸stico M茅dico</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <div class="container">
        <!-- Header Minimalista -->
        <header class="header">
            <div class="header-content">
                <div class="logo">
                    <i class="fas fa-heartbeat"></i>
                </div>
                <h1>Predicci贸n de Diagn贸stico M茅dico</h1>
                <p class="subtitle">Sistema de clasificaci贸n de enfermedades febriles tropicales</p>
                <div style="margin-top: 16px; display: flex; gap: 12px; justify-content: center; flex-wrap: wrap; font-size: 0.85rem;">
                    <span style="background: linear-gradient(135deg, #14B8A6, #0D9488); color: white; padding: 6px 14px; border-radius: 20px; font-weight: 600; box-shadow: 0 4px 12px rgba(20, 184, 166, 0.3);">
                         Dengue
                    </span>
                    <span style="background: linear-gradient(135deg, #F59E0B, #D97706); color: white; padding: 6px 14px; border-radius: 20px; font-weight: 600; box-shadow: 0 4px 12px rgba(245, 158, 11, 0.3);">
                         Malaria
                    </span>
                    <span style="background: linear-gradient(135deg, #F43F5E, #E11D48); color: white; padding: 6px 14px; border-radius: 20px; font-weight: 600; box-shadow: 0 4px 12px rgba(244, 63, 94, 0.3);">
                        И Leptospirosis
                    </span>
                </div>
            </div>
        </header>

        <!-- Tabs Simplificados -->
        <div class="tabs">
            <button class="tab-btn active" onclick="openTab(event, 'individual')">
                <i class="fas fa-user"></i>
                <span>Individual</span>
            </button>
            <button class="tab-btn" onclick="openTab(event, 'batch')">
                <i class="fas fa-file-medical"></i>
                <span>Por Lotes</span>
            </button>
        </div>

        <!-- Tab 1: Predicci贸n Individual -->
        <div id="individual" class="tab-content active">
            <div class="card">
                <div class="card-header">
                    <h2>Datos del Paciente</h2>
                    <p>Complete la informaci贸n cl铆nica</p>
                </div>
                
                <form id="individualForm">
                    <!-- Selector de Modelo -->
                    <div class="form-section" style="border-bottom: 2px solid var(--primary); padding-bottom: 20px;">
                        <h3><i class="fas fa-brain"></i> Seleccionar Modelo de Predicci贸n</h3>
                        <div class="model-selector" style="display: flex; gap: 16px; margin-top: 16px;">
                            <label class="model-option" style="flex: 1; cursor: pointer;">
                                <input type="radio" name="model_type" value="logistic" checked style="display: none;">
                                <div class="model-card" style="padding: 16px; border: 2px solid var(--gray-300); border-radius: 12px; text-align: center; transition: all 0.3s;">
                                    <i class="fas fa-chart-line" style="font-size: 2rem; color: var(--primary); margin-bottom: 8px;"></i>
                                    <h4 style="margin: 8px 0; font-size: 1rem;">Regresi贸n Log铆stica</h4>
                                    <p style="font-size: 0.85rem; color: var(--gray-700); margin: 4px 0;">Modelo lineal cl谩sico</p>
                                </div>
                            </label>
                            <label class="model-option" style="flex: 1; cursor: pointer;">
                                <input type="radio" name="model_type" value="neural" style="display: none;">
                                <div class="model-card" style="padding: 16px; border: 2px solid var(--gray-300); border-radius: 12px; text-align: center; transition: all 0.3s;">
                                    <i class="fas fa-network-wired" style="font-size: 2rem; color: var(--accent); margin-bottom: 8px;"></i>
                                    <h4 style="margin: 8px 0; font-size: 1rem;">Red Neuronal</h4>
                                    <p style="font-size: 0.85rem; color: var(--gray-700); margin: 4px 0;">Aprendizaje profundo</p>
                                </div>
                            </label>
                        </div>
                    </div>

                    <!-- Secci贸n: Informaci贸n B谩sica -->
                    <div class="form-section">
                        <h3><i class="fas fa-user-circle"></i> Informaci贸n B谩sica</h3>
                        <div class="form-grid-2">
                            <div class="form-group">
                                <label>Edad</label>
                                <input type="number" name="age" min="0" max="120" step="0.1" required placeholder="Ej: 25">
                            </div>
                            <div class="form-group">
                                <label>Temperatura (掳C)</label>
                                <input type="number" name="body_temperature" min="35" max="42" step="0.1" required placeholder="Ej: 37.5">
                            </div>
                            <div class="form-group">
                                <label>D铆as Hospitalizado</label>
                                <input type="number" name="hospitalization_days" min="0" step="1" required placeholder="Ej: 3">
                            </div>
                        </div>
                    </div>

                    <!-- Secci贸n: Informaci贸n Demogr谩fica -->
                    <div class="form-section">
                        <h3><i class="fas fa-id-card"></i> Informaci贸n Demogr谩fica</h3>
                        <div class="form-grid-2">
                            <div class="form-group">
                                <label>G茅nero</label>
                                <select name="gender" required style="width: 100%; padding: 10px; border: 1px solid var(--gray-300); border-radius: 8px; font-size: 0.95rem;">
                                    <option value="">Seleccione...</option>
                                    <option value="male">Masculino</option>
                                    <option value="female">Femenino</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Origen</label>
                                <select name="origin" required style="width: 100%; padding: 10px; border: 1px solid var(--gray-300); border-radius: 8px; font-size: 0.95rem;">
                                    <option value="">Seleccione...</option>
                                    <option value="urban">Urbano</option>
                                    <option value="rural">Rural</option>
                                </select>
                            </div>
                            <div class="form-group" style="grid-column: 1 / -1;">
                                <label>Ocupaci贸n</label>
                                <select name="occupation" required style="width: 100%; padding: 10px; border: 1px solid var(--gray-300); border-radius: 8px; font-size: 0.95rem;">
                                    <option value="">Seleccione...</option>
                                    <option value="homemaker">Ama de Casa</option>
                                    <option value="student">Estudiante</option>
                                    <option value="professional">Profesional</option>
                                    <option value="merchant">Comerciante</option>
                                    <option value="agriculture_livestock">Agricultura/Ganader铆a</option>
                                    <option value="various_jobs">Trabajos Varios</option>
                                    <option value="unemployed">Desempleado</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <!-- Secci贸n: An谩lisis de Hematolog铆a -->
                    <div class="form-section">
                        <h3><i class="fas fa-vial"></i> An谩lisis de Hematolog铆a</h3>
                        <div class="form-grid-2">
                            <div class="form-group">
                                <label>Hematocrito (%)</label>
                                <input type="number" name="hematocrit" min="0" max="100" step="0.01" placeholder="Ej: 35.5">
                            </div>
                            <div class="form-group">
                                <label>Hemoglobina (g/dL)</label>
                                <input type="number" name="hemoglobin" min="0" max="25" step="0.01" placeholder="Ej: 12.5">
                            </div>
                            <div class="form-group">
                                <label>Gl贸bulos Rojos (c茅lulas/渭L)</label>
                                <input type="number" name="red_blood_cells" min="0" step="1000" placeholder="Ej: 4500000">
                            </div>
                            <div class="form-group">
                                <label>Gl贸bulos Blancos (c茅lulas/渭L)</label>
                                <input type="number" name="white_blood_cells" min="0" step="1" placeholder="Ej: 7000">
                            </div>
                            <div class="form-group">
                                <label>Neutr贸filos (%)</label>
                                <input type="number" name="neutrophils" min="0" max="100" step="0.01" placeholder="Ej: 55">
                            </div>
                            <div class="form-group">
                                <label>Eosin贸filos (%)</label>
                                <input type="number" name="eosinophils" min="0" max="100" step="0.01" placeholder="Ej: 2">
                            </div>
                            <div class="form-group">
                                <label>Bas贸filos (%)</label>
                                <input type="number" name="basophils" min="0" max="100" step="0.01" placeholder="Ej: 0.5">
                            </div>
                            <div class="form-group">
                                <label>Monocitos (%)</label>
                                <input type="number" name="monocytes" min="0" max="100" step="0.01" placeholder="Ej: 8">
                            </div>
                            <div class="form-group">
                                <label>Linfocitos (%)</label>
                                <input type="number" name="lymphocytes" min="0" max="100" step="0.01" placeholder="Ej: 35">
                            </div>
                            <div class="form-group">
                                <label>Plaquetas (c茅lulas/渭L)</label>
                                <input type="number" name="platelets" min="0" step="1000" placeholder="Ej: 150000">
                            </div>
                        </div>
                    </div>

                    <!-- Secci贸n: Qu铆mica Sangu铆nea -->
                    <div class="form-section">
                        <h3><i class="fas fa-flask"></i> Qu铆mica Sangu铆nea</h3>
                        <div class="form-grid-2">
                            <div class="form-group">
                                <label>AST/SGOT (U/L)</label>
                                <input type="number" name="AST (SGOT)" min="0" step="0.01" placeholder="Ej: 35">
                            </div>
                            <div class="form-group">
                                <label>ALT/SGPT (U/L)</label>
                                <input type="number" name="ALT (SGPT)" min="0" step="0.01" placeholder="Ej: 40">
                            </div>
                            <div class="form-group">
                                <label>Fosfatasa Alcalina (U/L)</label>
                                <input type="number" name="ALP (alkaline_phosphatase)" min="0" step="0.01" placeholder="Ej: 100">
                            </div>
                            <div class="form-group">
                                <label>Bilirrubina Total (mg/dL)</label>
                                <input type="number" name="total_bilirubin" min="0" step="0.01" placeholder="Ej: 1.0">
                            </div>
                            <div class="form-group">
                                <label>Bilirrubina Directa (mg/dL)</label>
                                <input type="number" name="direct_bilirubin" min="0" step="0.01" placeholder="Ej: 0.3">
                            </div>
                            <div class="form-group">
                                <label>Bilirrubina Indirecta (mg/dL)</label>
                                <input type="number" name="indirect_bilirubin" min="0" step="0.01" placeholder="Ej: 0.7">
                            </div>
                            <div class="form-group">
                                <label>Prote铆nas Totales (g/dL)</label>
                                <input type="number" name="total_proteins" min="0" step="0.01" placeholder="Ej: 7.0">
                            </div>
                            <div class="form-group">
                                <label>Alb煤mina (g/dL)</label>
                                <input type="number" name="albumin" min="0" step="0.01" placeholder="Ej: 4.0">
                            </div>
                            <div class="form-group">
                                <label>Creatinina (mg/dL)</label>
                                <input type="number" name="creatinine" min="0" step="0.01" placeholder="Ej: 1.0">
                            </div>
                            <div class="form-group">
                                <label>Urea (mg/dL)</label>
                                <input type="number" name="urea" min="0" step="0.01" placeholder="Ej: 25">
                            </div>
                        </div>
                    </div>

                    <!-- Secci贸n: S铆ntomas Principales -->
                    <div class="form-section">
                        <h3><i class="fas fa-thermometer-half"></i> S铆ntomas Principales <span style="color: #e74c3c; font-weight: bold;">*</span></h3>
                        <p style="color: #666; font-size: 0.9rem; margin-bottom: 1rem;">
                            <i class="fas fa-info-circle"></i> Debe marcar al menos un s铆ntoma para realizar la predicci贸n
                        </p>
                        <div class="symptoms-grid">
                            <label class="checkbox-card">
                                <input type="checkbox" name="fever" value="1">
                                <div class="checkbox-content">
                                    <i class="fas fa-fire"></i>
                                    <span>Fiebre</span>
                                </div>
                            </label>
                            <label class="checkbox-card">
                                <input type="checkbox" name="headache" value="1">
                                <div class="checkbox-content">
                                    <i class="fas fa-head-side-cough"></i>
                                    <span>Dolor de Cabeza</span>
                                </div>
                            </label>
                            <label class="checkbox-card">
                                <input type="checkbox" name="dizziness" value="1">
                                <div class="checkbox-content">
                                    <i class="fas fa-dizzy"></i>
                                    <span>Mareos</span>
                                </div>
                            </label>
                            <label class="checkbox-card">
                                <input type="checkbox" name="loss_of_appetite" value="1">
                                <div class="checkbox-content">
                                    <i class="fas fa-utensils"></i>
                                    <span>P茅rdida Apetito</span>
                                </div>
                            </label>
                            <label class="checkbox-card">
                                <input type="checkbox" name="weakness" value="1">
                                <div class="checkbox-content">
                                    <i class="fas fa-battery-quarter"></i>
                                    <span>Debilidad</span>
                                </div>
                            </label>
                            <label class="checkbox-card">
                                <input type="checkbox" name="myalgias" value="1">
                                <div class="checkbox-content">
                                    <i class="fas fa-bone"></i>
                                    <span>Dolor Muscular</span>
                                </div>
                            </label>
                            <label class="checkbox-card">
                                <input type="checkbox" name="arthralgias" value="1">
                                <div class="checkbox-content">
                                    <i class="fas fa-hand-dots"></i>
                                    <span>Dolor Articular</span>
                                </div>
                            </label>
                            <label class="checkbox-card">
                                <input type="checkbox" name="eye_pain" value="1">
                                <div class="checkbox-content">
                                    <i class="fas fa-eye"></i>
                                    <span>Dolor Ocular</span>
                                </div>
                            </label>
                            <label class="checkbox-card">
                                <input type="checkbox" name="hemorrhages" value="1">
                                <div class="checkbox-content">
                                    <i class="fas fa-droplet"></i>
                                    <span>Hemorragias</span>
                                </div>
                            </label>
                            <label class="checkbox-card">
                                <input type="checkbox" name="vomiting" value="1">
                                <div class="checkbox-content">
                                    <i class="fas fa-sad-tear"></i>
                                    <span>V贸mitos</span>
                                </div>
                            </label>
                            <label class="checkbox-card">
                                <input type="checkbox" name="abdominal_pain" value="1">
                                <div class="checkbox-content">
                                    <i class="fas fa-hand-holding-medical"></i>
                                    <span>Dolor Abdominal</span>
                                </div>
                            </label>
                            <label class="checkbox-card">
                                <input type="checkbox" name="chills" value="1">
                                <div class="checkbox-content">
                                    <i class="fas fa-temperature-low"></i>
                                    <span>Escalofr铆os</span>
                                </div>
                            </label>
                            <label class="checkbox-card">
                                <input type="checkbox" name="edema" value="1">
                                <div class="checkbox-content">
                                    <i class="fas fa-circle-notch"></i>
                                    <span>Edema</span>
                                </div>
                            </label>
                            <label class="checkbox-card">
                                <input type="checkbox" name="jaundice" value="1">
                                <div class="checkbox-content">
                                    <i class="fas fa-user-injured"></i>
                                    <span>Ictericia</span>
                                </div>
                            </label>
                            <label class="checkbox-card">
                                <input type="checkbox" name="petechiae" value="1">
                                <div class="checkbox-content">
                                    <i class="fas fa-braille"></i>
                                    <span>Petequias</span>
                                </div>
                            </label>
                            <label class="checkbox-card">
                                <input type="checkbox" name="rash" value="1">
                                <div class="checkbox-content">
                                    <i class="fas fa-allergies"></i>
                                    <span>Erupci贸n</span>
                                </div>
                            </label>
                            <label class="checkbox-card">
                                <input type="checkbox" name="diarrhea" value="1">
                                <div class="checkbox-content">
                                    <i class="fas fa-toilet"></i>
                                    <span>Diarrea</span>
                                </div>
                            </label>
                            <label class="checkbox-card">
                                <input type="checkbox" name="hemoptysis" value="1">
                                <div class="checkbox-content">
                                    <i class="fas fa-lungs"></i>
                                    <span>Hemoptisis</span>
                                </div>
                            </label>
                            <label class="checkbox-card">
                                <input type="checkbox" name="bruises" value="1">
                                <div class="checkbox-content">
                                    <i class="fas fa-hand-dots"></i>
                                    <span>Moretones</span>
                                </div>
                            </label>
                            <label class="checkbox-card">
                                <input type="checkbox" name="respiratory_difficulty" value="1">
                                <div class="checkbox-content">
                                    <i class="fas fa-wind"></i>
                                    <span>Dificultad Respiratoria</span>
                                </div>
                            </label>
                            <label class="checkbox-card">
                                <input type="checkbox" name="itching" value="1">
                                <div class="checkbox-content">
                                    <i class="fas fa-hand-sparkles"></i>
                                    <span>Picaz贸n</span>
                                </div>
                            </label>
                        </div>
                    </div>

                    <div class="button-group">
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-brain"></i>
                            Predecir Diagn贸stico
                        </button>
                        <button type="button" class="btn btn-secondary" onclick="resetForm()">
                            <i class="fas fa-redo"></i>
                            Limpiar
                        </button>
                    </div>
                </form>

                <!-- Resultado -->
                <div id="individualResult" class="result-container" style="display: none;">
                    <div id="resultContent"></div>
                </div>
            </div>
        </div>

        <!-- Tab 2: Predicci贸n por Lotes -->
        <div id="batch" class="tab-content">
            <div class="card">
                <div class="card-header">
                    <h2>Predicci贸n por Lotes</h2>
                    <p>Suba un archivo Excel o CSV</p>
                </div>
                
                <div class="upload-section">
                    <div class="upload-area" id="uploadArea">
                        <i class="fas fa-cloud-upload-alt"></i>
                        <h3>Arrastre su archivo aqu铆</h3>
                        <p>o haga clic para seleccionar</p>
                        <span class="file-types">Excel (.xlsx) o CSV (.csv)</span>
                        <input type="file" id="batchFile" accept=".xlsx,.csv" style="display: none;">
                    </div>
                    
                    <div class="file-selected" id="fileSelected" style="display: none;">
                        <i class="fas fa-file-excel"></i>
                        <div class="file-info">
                            <span id="fileName"></span>
                            <button onclick="removeFile()" class="btn-remove">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                    </div>

                    <!-- Selector de Modelo para Lotes -->
                    <div class="model-selector">
                        <h3 style="text-align: center; margin-bottom: 1rem; color: var(--text-primary);">
                            <i class="fas fa-cogs"></i> Seleccione el Modelo
                        </h3>
                        <div class="model-options">
                            <label class="model-option">
                                <input type="radio" name="batch_model_type" value="logistic" checked>
                                <div class="model-card">
                                    <i class="fas fa-chart-line"></i>
                                    <h4>Regresi贸n Log铆stica</h4>
                                    <p class="model-description">Modelo lineal cl谩sico</p>
                                </div>
                            </label>
                            <label class="model-option">
                                <input type="radio" name="batch_model_type" value="neural">
                                <div class="model-card">
                                    <i class="fas fa-brain"></i>
                                    <h4>Red Neuronal</h4>
                                    <p class="model-description">Deep learning con 3 capas</p>
                                </div>
                            </label>
                        </div>
                    </div>

                    <button class="btn btn-primary btn-block" onclick="predictBatch()" id="predictBatchBtn" disabled>
                        <i class="fas fa-magic"></i>
                        Realizar Predicciones
                    </button>
                </div>

                <!-- Resultado por lotes -->
                <div id="batchResult" class="result-container" style="display: none;">
                    <div id="batchResultContent"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <p>Sistema de Predicci贸n M茅dica 漏 2025</p>
    </footer>

    <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html>
